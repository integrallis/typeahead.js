/*!
 * typeahead.js 0.9.3-integrallis
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */

var VERSION="0.9.3-integrallis",utils={isMsie:function(){var t=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return t?parseInt(t[2],10):!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(t){return t===void 0},bind:$.proxy,bindAll:function(t){var e;for(var i in t)$.isFunction(e=t[i])&&(t[i]=$.proxy(e,t))},indexOf:function(t,e){for(var i=0;t.length>i;i++)if(t[i]===e)return i;return-1},each:$.each,map:$.map,filter:$.grep,every:function(t,e){var i=!0;return t?($.each(t,function(n,s){return(i=e.call(null,s,n,t))?void 0:!1}),!!i):i},some:function(t,e){var i=!1;return t?($.each(t,function(n,s){return(i=e.call(null,s,n,t))?!1:void 0}),!!i):i},mixin:$.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,s;return function(){var r,o,u=this,a=arguments;return r=function(){n=null,i||(s=t.apply(u,a))},o=i&&!n,clearTimeout(n),n=setTimeout(r,e),o&&(s=t.apply(u,a)),s}},throttle:function(t,e){var i,n,s,r,o,u;return o=0,u=function(){o=new Date,s=null,r=t.apply(i,n)},function(){var a=new Date,l=e-(a-o);return i=this,n=arguments,0>=l?(clearTimeout(s),s=null,o=a,r=t.apply(i,n)):s||(s=setTimeout(u,l)),r}},tokenizeQuery:function(t){return $.trim(t).toLowerCase().split(/[\s]+/)},tokenizeText:function(t){return $.trim(t).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},EventTarget=function(){var t=/\s+/;return{on:function(e,i){var n;if(!i)return this;for(this._callbacks=this._callbacks||{},e=e.split(t);n=e.shift();)this._callbacks[n]=this._callbacks[n]||[],this._callbacks[n].push(i);return this},trigger:function(e,i){var n,s;if(!this._callbacks)return this;for(e=e.split(t);n=e.shift();)if(s=this._callbacks[n])for(var r=0;s.length>r;r+=1)s[r].call(this,{type:n,data:i});return this}}}(),EventBus=function(){function t(t){t&&t.el||$.error("EventBus initialized without el"),this.$el=$(t.el)}var e="typeahead:";return utils.mixin(t.prototype,{trigger:function(t){var i=[].slice.call(arguments,1);this.$el.trigger(e+t,i)}}),t}(),PersistentStorage=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=RegExp("^"+this.prefix)}function e(){return(new Date).getTime()}function i(t){return JSON.stringify(utils.isUndefined(t)?null:t)}function n(t){return JSON.parse(t)}var s,r;try{s=window.localStorage}catch(o){s=null}return r=s&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),n(s.getItem(this._prefix(t)))},set:function(t,n,r){return utils.isNumber(r)?s.setItem(this._ttlKey(t),i(e()+r)):s.removeItem(this._ttlKey(t)),s.setItem(this._prefix(t),i(n))},remove:function(t){return s.removeItem(this._ttlKey(t)),s.removeItem(this._prefix(t)),this},clear:function(){var t,e,i=[],n=s.length;for(t=0;n>t;t++)(e=s.key(t)).match(this.keyMatcher)&&i.push(e.replace(this.keyMatcher,""));for(t=i.length;t--;)this.remove(i[t]);return this},isExpired:function(t){var i=n(s.getItem(this._ttlKey(t)));return utils.isNumber(i)&&e()>i?!0:!1}}:{get:utils.noop,set:utils.noop,remove:utils.noop,clear:utils.noop,isExpired:utils.noop},utils.mixin(t.prototype,r),t}(),RequestCache=function(){function t(t){utils.bindAll(this),t=t||{},this.sizeLimit=t.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return utils.mixin(t.prototype,{get:function(t){return this.cache[t]},set:function(t,e){var i;this.cachedKeysByAge.length===this.sizeLimit&&(i=this.cachedKeysByAge.shift(),delete this.cache[i]),this.cache[t]=e,this.cachedKeysByAge.push(t)}}),t}(),Transport=function(){function t(t){utils.bindAll(this),t=utils.isString(t)?{url:t}:t,r=r||new RequestCache,s=utils.isNumber(t.maxParallelRequests)?t.maxParallelRequests:s||6,this.url=t.url,this.wildcard=t.wildcard||"%QUERY",this.filter=t.filter,this.replace=t.replace,this.ajaxSettings={type:"get",cache:t.cache,timeout:t.timeout,dataType:t.dataType||"json",beforeSend:t.beforeSend},this._get=(/^throttle$/i.test(t.rateLimitFn)?utils.throttle:utils.debounce)(this._get,t.rateLimitWait||300)}function e(){o++}function i(){o--}function n(){return s>o}var s,r,o=0,u={};return utils.mixin(t.prototype,{_get:function(t,e){function i(i){var n=s.filter?s.filter(i):i;e&&e(n),r.set(t,i)}var s=this;n()?this._sendRequest(t).done(i):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(t){function n(){i(),u[t]=null,s.onDeckRequestArgs&&(s._get.apply(s,s.onDeckRequestArgs),s.onDeckRequestArgs=null)}var s=this,r=u[t];return r||(e(),r=u[t]=$.ajax(t,this.ajaxSettings).always(n)),r},get:function(t,e){var i,n,s=this,o=encodeURIComponent(t||"");return e=e||utils.noop,i=this.replace?this.replace(this.url,o):this.url.replace(this.wildcard,o),(n=r.get(i))?utils.defer(function(){e(s.filter?s.filter(n):n)}):this._get(i,e),!!n}}),t}(),Dataset=function(){function t(t){utils.bindAll(this),utils.isString(t.template)&&!t.engine&&$.error("no template engine specified"),t.local||t.prefetch||t.remote||$.error("one of local, prefetch, or remote is required"),this.name=t.name||utils.getUniqueId(),this.limit=t.limit||5,this.minLength=t.minLength||1,this.header=t.header,this.footer=t.footer,this.valueKey=t.valueKey||"value",this.template=e(t.template,t.engine,this.valueKey),this.local=t.local,this.prefetch=t.prefetch,this.remote=t.remote,this.itemHash={},this.adjacencyList={},this.storage=t.name?new PersistentStorage(t.name):null}function e(t,e,i){var n,s;return utils.isFunction(t)?n=t:utils.isString(t)?(s=e.compile(t),n=utils.bind(s.render,s)):n=function(t){return"<p>"+t[i]+"</p>"},n}var i={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return utils.mixin(t.prototype,{_processLocalData:function(t){this._mergeProcessedData(this._processData(t))},_loadPrefetchData:function(t){function e(e){var n=t.filter?t.filter(e):e,s=l._processData(n),r=s.itemHash,o=s.adjacencyList;l.storage&&(l.storage.set(i.itemHash,r,t.ttl),l.storage.set(i.adjacencyList,o,t.ttl),l.storage.set(i.thumbprint,c,t.ttl),l.storage.set(i.protocol,utils.getProtocol(),t.ttl)),l._mergeProcessedData(s)}var n,s,r,o,u,a,l=this,c=VERSION+(t.thumbprint||"");return this.storage&&(n=this.storage.get(i.thumbprint),s=this.storage.get(i.protocol),r=this.storage.get(i.itemHash),o=this.storage.get(i.adjacencyList)),u=n!==c||s!==utils.getProtocol(),t=utils.isString(t)?{url:t}:t,t.ttl=utils.isNumber(t.ttl)?t.ttl:864e5,r&&o&&!u?(this._mergeProcessedData({itemHash:r,adjacencyList:o}),a=$.Deferred().resolve()):a=$.getJSON(t.url).done(e),a},_transformDatum:function(t){var e=utils.isString(t)?t:t[this.valueKey],i=t.tokens||utils.tokenizeText(e),n={value:e,tokens:i};return utils.isString(t)?(n.datum={},n.datum[this.valueKey]=t):n.datum=t,n.tokens=utils.filter(n.tokens,function(t){return!utils.isBlankString(t)}),n.tokens=utils.map(n.tokens,function(t){return t.toLowerCase()}),n},_processData:function(t){var e=this,i={},n={};return utils.each(t,function(t,s){var r=e._transformDatum(s),o=utils.getUniqueId(r.value);i[o]=r,utils.each(r.tokens,function(t,e){var i=e.charAt(0),s=n[i]||(n[i]=[o]);!~utils.indexOf(s,o)&&s.push(o)})}),{itemHash:i,adjacencyList:n}},_mergeProcessedData:function(t){var e=this;utils.mixin(this.itemHash,t.itemHash),utils.each(t.adjacencyList,function(t,i){var n=e.adjacencyList[t];e.adjacencyList[t]=n?n.concat(i):i})},_getLocalSuggestions:function(t){var e,i=this,n=[],s=[],r=[];return utils.each(t,function(t,e){var i=e.charAt(0);!~utils.indexOf(n,i)&&n.push(i)}),utils.each(n,function(t,n){var r=i.adjacencyList[n];return r?(s.push(r),(!e||r.length<e.length)&&(e=r),void 0):!1}),s.length<n.length?[]:(utils.each(e,function(e,n){var o,u,a=i.itemHash[n];o=utils.every(s,function(t){return~utils.indexOf(t,n)}),u=o&&utils.every(t,function(t){return utils.some(a.tokens,function(e){return 0===e.indexOf(t)})}),u&&r.push(a)}),r)},initialize:function(){var t;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new Transport(this.remote):null,t=this.prefetch?this._loadPrefetchData(this.prefetch):$.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return t},t},getSuggestions:function(t,e){function i(t){s=s.slice(0),utils.each(t,function(t,e){var i,n=r._transformDatum(e);return i=utils.some(s,function(t){return n.value===t.value}),!i&&s.push(n),s.length<r.limit}),e&&e(s)}var n,s,r=this,o=!1;t.length<this.minLength||(n=utils.tokenizeQuery(t),s=this._getLocalSuggestions(n).slice(0,this.limit),s.length<this.limit&&this.transport&&(o=this.transport.get(t,i)),!o&&e&&e(s))}}),t}(),InputView=function(){function t(t){var i=this;utils.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=$(t.hint),this.$input=$(t.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),utils.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){i.specialKeyCodeMap[t.which||t.keyCode]||utils.defer(i._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=e(this.$input)}function e(t){return $("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function i(t,e){return t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),t===e}return utils.mixin(t.prototype,EventTarget,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(t){var e=this.specialKeyCodeMap[t.which||t.keyCode];e&&this.trigger(e+"Keyed",t)},_compareQueryToInputValue:function(){var t=this.getInputValue(),e=i(this.query,t),n=e?this.query.length!==t.length:!1;n?this.trigger("whitespaceChanged",{value:this.query}):e||this.trigger("queryChanged",{value:this.query=t})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){""!==t&&void 0!==t&&this.$input.val(t),!e&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(t){this.$hint.val(t)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var t,e=this.$input.val().length,i=this.$input[0].selectionStart;return utils.isNumber(i)?i===e:document.selection?(t=document.selection.createRange(),t.moveStart("character",-e),e===t.text.length):!0}}),t}(),DropdownView=function(){function t(t){utils.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=$(t.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function e(t){return t.data("suggestion")}var i={suggestionsList:'<span class="tt-suggestions"></span>'},n={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return utils.mixin(t.prototype,EventTarget,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(t){var e=$(t.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),e.addClass("tt-is-under-cursor")},_handleSelection:function(t){var i=$(t.currentTarget);this.trigger("suggestionSelected",e(i))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(t){var i,n,s,r;if(this.isVisible()){if(i=this._getSuggestions(),n=i.filter(".tt-is-under-cursor"),n.removeClass("tt-is-under-cursor"),s=i.index(n)+t,s=(s+1)%(i.length+1)-1,-1===s)return this.trigger("cursorRemoved"),void 0;-1>s&&(s=i.length-1),r=i.eq(s).addClass("tt-is-under-cursor"),this._ensureVisibility(r),this.trigger("cursorMoved",e(r))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(t){var e=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),i=this.$menu.scrollTop(),n=t.position().top,s=n+t.outerHeight(!0);0>n?this.$menu.scrollTop(i+n):s>e&&this.$menu.scrollTop(i+(s-e))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){var e={left:"0",right:"auto"},i={left:"auto",right:" 0"};"ltr"===t?this.$menu.css(e):this.$menu.css(i)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var t=this._getSuggestions().filter(".tt-is-under-cursor").first();return t.length>0?e(t):null},getFirstSuggestion:function(){var t=this._getSuggestions().first();return t.length>0?e(t):null},renderSuggestions:function(t,e){var s,r,o,u,a,l="tt-dataset-"+t.name,c='<div class="tt-suggestion">%body</div>',h=this.$menu.find("."+l);0===h.length&&(r=$(i.suggestionsList).css(n.suggestionsList),h=$("<div></div>").addClass(l).append(t.header).append(r).append(t.footer).appendTo(this.$menu)),e.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),o=document.createElement("div"),u=document.createDocumentFragment(),utils.each(e,function(e,i){i.dataset=t.name,s=t.template(i.datum),o.innerHTML=c.replace("%body",s),a=$(o.firstChild).css(n.suggestion).data("suggestion",i),a.children().each(function(){$(this).css(n.suggestionChild)}),u.appendChild(a[0])}),h.show().find(".tt-suggestions").html(u)):this.clearSuggestions(t.name),this.trigger("suggestionsRendered")},clearSuggestions:function(t){var e=t?this.$menu.find(".tt-dataset-"+t):this.$menu.find('[class^="tt-dataset-"]'),i=e.find(".tt-suggestions");e.hide(),i.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),t}(),TypeaheadView=function(){function t(t){var i,n,s;utils.bindAll(this),this.$node=e(t.input),this.datasets=t.datasets,this.dir=null,this.eventBus=t.eventBus,i=this.$node.find(".tt-dropdown-menu"),n=this.$node.find(".tt-query"),s=this.$node.find(".tt-hint"),this.dropdownView=new DropdownView({menu:i}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new InputView({input:n,hint:s}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function e(t){var e=$(n.wrapper),i=$(n.dropdown),r=$(t),o=$(n.hint);e=e.css(s.wrapper),i=i.css(s.dropdown),o.css(s.hint).css({backgroundAttachment:r.css("background-attachment"),backgroundClip:r.css("background-clip"),backgroundColor:r.css("background-color"),backgroundImage:r.css("background-image"),backgroundOrigin:r.css("background-origin"),backgroundPosition:r.css("background-position"),backgroundRepeat:r.css("background-repeat"),backgroundSize:r.css("background-size")}),r.data("ttAttrs",{dir:r.attr("dir"),autocomplete:r.attr("autocomplete"),spellcheck:r.attr("spellcheck"),style:r.attr("style")}),r.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(s.query);try{!r.attr("dir")&&r.attr("dir","auto")}catch(u){}return r.wrap(e).parent().prepend(o).append(i)}function i(t){var e=t.find(".tt-query");utils.each(e.data("ttAttrs"),function(t,i){utils.isUndefined(i)?e.removeAttr(t):e.attr(t,i)}),e.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(t),t.remove()}var n={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},s={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return utils.isMsie()&&utils.mixin(s.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),utils.isMsie()&&7>=utils.isMsie()&&(utils.mixin(s.wrapper,{display:"inline",zoom:"1"}),utils.mixin(s.query,{marginTop:"-1px"})),utils.mixin(t.prototype,EventTarget,{_managePreventDefault:function(t){var e,i,n=t.data,s=!1;switch(t.type){case"tabKeyed":e=this.inputView.getHintValue(),i=this.inputView.getInputValue(),s=e&&e!==i;break;case"upKeyed":case"downKeyed":s=!n.shiftKey&&!n.ctrlKey&&!n.metaKey}s&&n.preventDefault()},_setLanguageDirection:function(){var t=this.inputView.getLanguageDirection();t!==this.dir&&(this.dir=t,this.$node.css("direction",t),this.dropdownView.setLanguageDirection(t))},_updateHint:function(){var t,e,i,n,s,r=this.dropdownView.getFirstSuggestion(),o=r?r.value:null,u=this.dropdownView.isVisible(),a=this.inputView.isOverflow();o&&u&&!a&&(t=this.inputView.getInputValue(),e=t.replace(/\s{2,}/g," ").replace(/^\s+/g,""),i=utils.escapeRegExChars(e),n=RegExp("^(?:"+i+")(.*$)","i"),s=n.exec(o),this.inputView.setHintValue(t+(s?s[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(t){var e=t.data;this.inputView.setInputValue(e.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(t){this.dropdownView["blured"===t.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(t){var e=t.data;e.shiftKey||e.ctrlKey||e.metaKey||this.dropdownView["upKeyed"===t.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(t){var e="suggestionSelected"===t.type,i=e?t.data:this.dropdownView.getSuggestionUnderCursor();i&&(this.inputView.setInputValue(i.value),e?this.inputView.focus():t.data.preventDefault(),e&&utils.isMsie()?utils.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",i.datum,i.dataset))},_getSuggestions:function(){var t=this,e=this.inputView.getQuery();utils.isBlankString(e)||utils.each(this.datasets,function(i,n){n.getSuggestions(e,function(i){e===t.inputView.getQuery()&&t.dropdownView.renderSuggestions(n,i)})})},_autocomplete:function(t){var e,i,n,s,r;("rightKeyed"!==t.type&&"leftKeyed"!==t.type||(e=this.inputView.isCursorAtEnd(),i="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===t.type:"rightKeyed"===t.type,e&&!i))&&(n=this.inputView.getQuery(),s=this.inputView.getHintValue(),""!==s&&n!==s&&(r=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.datum,r.dataset)))},_propagateEvent:function(t){this.eventBus.trigger(t.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),i(this.$node),this.$node=null},setQuery:function(t){this.inputView.setQuery(t),this.inputView.setInputValue(t),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),t}();(function(){var t,e={},i="ttView";t={initialize:function(t){function n(){var t,e=$(this),n=new EventBus({el:e});t=utils.map(s,function(t){return t.initialize()}),e.data(i,new TypeaheadView({input:e,eventBus:n=new EventBus({el:e}),datasets:s})),$.when.apply($,t).always(function(){utils.defer(function(){n.trigger("initialized")})})}var s;return t=utils.isArray(t)?t:[t],0===t.length&&$.error("no datasets provided"),s=utils.map(t,function(t){var i=e[t.name]?e[t.name]:new Dataset(t);return t.name&&(e[t.name]=i),i}),this.each(n)},destroy:function(){function t(){var t=$(this),e=t.data(i);e&&(e.destroy(),t.removeData(i))}return this.each(t)},setQuery:function(t){function e(){var e=$(this).data(i);e&&e.setQuery(t)}return this.each(e)}},jQuery.fn.typeahead=function(e){return t[e]?t[e].apply(this,[].slice.call(arguments,1)):t.initialize.apply(this,arguments)}})();